<div class="todo-widget" x-data="todoWidget()">
    <h3>Úkoly</h3>


    <div class="input-group">
        <input type="text" x-model="newTodo" @keyup.enter="add()" placeholder="Nový úkol...">
        <button @click="add()">+</button>
    </div>


    <ul>
        <template x-for="todo in todos" :key="todo.id">
            <li :class="{ 'completed': todo.completed }">
                <input type="checkbox" x-model="todo.completed">d
                <span x-text="todo.text"></span>
                <button @click="remove(todo.id)">x</button>
            </li>
        </template>
    </ul>
</div>

<script>
function todoWidget() {
    return {
        newTodo: '',
        todos: JSON.parse(localStorage.getItem('todos') || '[]'),
        init() {
            this.$watch('todos', (value) => {
                localStorage.setItem('todos', JSON.stringify(value));
            });
        },
        add() {
            if (this.newTodo.trim() === '') return;
            this.todos.push({ id: Date.now(), text: this.newTodo, completed: false });
            this.newTodo = '';
        },
        remove(id) {
            this.todos = this.todos.filter(todo => todo.id !== id);
        }
    }
}
</script>

<style>
.todo-widget {
    padding: 10px;
    width: 250px;
    border: 1px solid #ccc;
}

.input-group {
    display: flex;
    gap: 5px;
    margin-bottom: 10px;
}

.input-group input {
    flex: 1;
    padding: 5px;
}

.input-group button {
    padding: 5px;
    cursor: pointer;
}

ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

li {
    display: flex;
    align-items: center;
    gap: 5px;
    margin-bottom: 5px;
}

.completed span {
    text-decoration: line-through;
    color: #888;
}

button {
    background: transparent;
    border: none;
    cursor: pointer;
    color: red;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
